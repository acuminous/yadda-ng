<pre>



                                                                                                                                              ┌─────────────────────────────────────────────┐
                                                                                                                                              │                                             │
                                                                                                                                              │             SpecificationParser             │                                                                                                                                             ┌────────────────────────────────────────────────────┐
                          ┌───────────────────────────────────────────────────────────────────────────────────────┐                           │                                             │                                       ┌───────────────────────┐                                                                             │                                                    │
                          │                                                                                       │                           ├─────────────────────────────────────────────┤                                       │                       │                                                                             │                    StateMachine                    │
                          │                                     Specification                                     │─ ─ ─ ─ ─produces ─ ─ ─ ─ ─│parse(text: string, session?: Session): any  ├ ─ ─ ─ ─ leverages ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ │        Session        │                                                                             ├────────────────────────────────────────────────────┤
                          │                                                                                       │                           │static getIndentation(line: text): number    │                                       │                       │                                                                             │specification?: Specification                       │
                          ├───────────────────────────────────────────────────────────────────────────────────────┤                           └─────────────────────────────────────────────┘                                       ├───────────────────────┤                                      ┌──────────────────────────────────────│state: State                                        │
                          │createFeature({ annotations: Annotations, title: string }): Specification              │                                                                                                                 │language: Language     │                                      │                                      ├────────────────────────────────────────────────────┤
                          │describeFeature({ text })                                                              │                                                            ┌───────────────────────────────────adopts───────────│machine: StateMachine  │──────────registers───────────────────┘                                      │specification(): Specification                      │
                          │createBackground({ annotations: Annotations, title: string })                          │                                                            │                                                    └───────────────────────┘                                                                             │handle(source: string, session: Session)            │
                          │createBackgroundStep({ annotations: Annotations, text: string, generalised?: string }) │                                                            │                                                                                                                                                          │toCreateFeatureState()                              │
                          │createScenario({ annotations: Annotations, title: string })                            │                                                            │                                                                                                                                                          │toCreateBackgroundState()                           │
                          │createScenarioStep({ annotations: Annotations, text: string, generalised?: string })   │                                                            │                                                                                                                                                          │toAfterBackgroundStepDocStringState()               │
                          │createScenarioStepDocString({ text: string })                                          │                                                            │                                                                                                                                                          │toAfterBackgroundStepState()                        │
                          │serialize(): any                                                                       │                                                            │                                                                                                                                                          │toCreateBackgroundStepDocStringState(event: Event)  │
                          │serialise(): any                                                                       │                                                            │                                                                                                                                                          │toCreateScenarioState()                             │
                          └───────────────────────────────────────────────────────────────────────────────────────┘                                                            │                                                                                                                                                          │toAfterScenarioStepDocStringState()                 │
                                                                                                                                                                               │                                                                                                                                                          └────────────────────────────────────────────────────┘
                                                                                                                                                                               │                                                                                                                                                                                     │
                                                                                                                                              ┌────────────────────────────────────────────────────────────────┐                                                                                                                                                 maintains
                                                                                                                                              │                            Language                            │                                                                                                                                                     │
                                                                                                                                              │                         <<interface>>                          │                                                                                                                                                     │
                                                                                                                                              │                                                                │                                                                                                                    ┌────────────────────────────────────────────────────────────────┐                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ┌────────────────────────────────────────────────────────────────┐
                                                                                                                                              └────────────────────────────────────────────────────────────────┘                                                                                                                    │                             State                              │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        │                             Event                              │
                                                                                                                                                                               △                                                                                                                                                    │                         <<interface>>                          │─ ─ ─ ─ handles ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ │                         <<interface>>                          │
                                                                                                                                                                               │                                                                                                                                                    │                                                                │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        │                                                                │
                                                                                                                                                                               │                                                                                                                                                    ├────────────────────────────────────────────────────────────────┤                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ├────────────────────────────────────────────────────────────────┤
                                                                                                                                                                               │                                                                                                                                                    │name(): string                                                  │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        │name(): string                                                  │
                                                                                                                                    ┌─────────────────────────────────────────────────────────────────────────────────────┐                                                                                                         │handle(source: string, session: Session, state: State): boolean │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        │handle(source: string, session: Session, state: State): boolean │
                                                                                                                                    │                                                                                     │                                                                                                         └────────────────────────────────────────────────────────────────┘                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        └────────────────────────────────────────────────────────────────┘
                                                                                                                                    │                                    BaseLanguage                                     │                                                                                                                                          △                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         △
                                                                                                                                    │                                                                                     │                                                                                                                                          │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         │
                                                                                                                                    ├─────────────────────────────────────────────────────────────────────────────────────┤                                                                                                                                          │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         │
                                                                                                                                    │name: string                                                                         │                                                                                                                                          │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         │
                                                                                                                                    │code: string                                                                         │                                                                                                                  ┌───────────────────────────────────────────────┐                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 │
                                                                                                                                    │vocabulary: { step: RegExp, feature: RegExp, background: RegExp, scenario: RegExp }  │                                                                                                                  │                                               │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 │
                                                                                                                                    ├─────────────────────────────────────────────────────────────────────────────────────┤                                                                                                                  │                   BaseState                   │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ┌────────────────────────────────────────────────────────────────────┐
                                                                                                                                    │name(): string                                                                       │                                                                                                                  │                                               │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              │                                                                    │
                                                                                                                                    │code(): string                                                                       │                                                                                                                  ├───────────────────────────────────────────────┤                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              │                             BaseEvent                              │
                                                                                                                                    │answersToName(name: string): boolean                                                 │                                                                                                                  │machine: StateMachine                          │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              │                                                                    │
                                                                                                                                    │answersToCode(code: string): boolean                                                 │                                                                                                                  │events?: Event[]                               │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ├────────────────────────────────────────────────────────────────────┤
                                                                                                                                    │regexp(type: string): RegExp                                                         │                                                                                                                  ├───────────────────────────────────────────────┤                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              │name(): string                                                      │
                                                                                                                                    │generalise(text): string                                                             │                                                                                                                  │name(): string                                 │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              │handle(notify(source: string, session: Session, state: State): void │
                                                                                                                                    └─────────────────────────────────────────────────────────────────────────────────────┘                                                                                                                  │handle(source: string, session: Session): void │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              └────────────────────────────────────────────────────────────────────┘
                                                                                                                                                                               ▲                                                                                                                                                             │onAnnotation(event: Event): void               │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 ▲
                                                                                                                                                                               │                                                                                                                                                             │onBackground(event: Event): void               │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 │
                                                                                                                                                                               │                                                                                                                                                             │onBlankLine(event: Event): void                │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 │
                                                                                                                                                                               │                                                                                                                                                             │onDocString(event: Event): void                │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 │
                                                                                                                                                      ┌────────────────────────┼────────────────────────┐                                                                                                                                    │onDocStringIndentStart(event: Event): void     │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 │
                                                                                                                                                      │                        │                        │                                                                                                                                    │onDocStringIndentStop(event: Event): void      │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ┌──────────────────────────────────────────────────────────────────────────────┬───────────────────────────────────────────────────────────────┬───────────────────────────────┴───────────────────────────────┬───────────────────────────────────────────────────────────────┬──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
                                                                                                                                                      │                        │                        │                                                                                                                                    │onDocStringTokenStart(event: Event): void      │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  │                                                                              │                                                               │                                                               │                                                               │                                                                                                                                                                                                                                  │
                                                                                                                                                      │                        │                        │                                                                                                                                    │onDocStringTokenStop(event: Event): void       │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  │                                                                              │                                                               │                                                               │                                                               │                                                                                                                                                                                                                                  │
                                                                                                                                                      │                        │                        │                                                                                                                                    │onEnd(event: Event): void                      │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  │                                                                              │                                                               │                                                               │                                                               │                                                                                                                                                                                                                                  │
                                                                                                                                          ┌──────────────────────┐ ┌──────────────────────┐ ┌──────────────────────┐                                                                                                                         │onFeature(event: Event): void                  │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  │                                                                              │                                                               │                                                               │                                                               │                                                                                                                                                                                                                                  │
                                                                                                                                          │                      │ │                      │ │                      │                                                                                                                         │onLanguage(event: Event): void                 │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  │                                                                              │                                                               │                                                               │                                                               │                                                                                                                                                                                                                                  │
                                                                                                                                          │       English        │ │        Pirate        │ │         None         │                                                                                                                         │onMultilineComment(event: Event): void         │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 ┌────────────────────────────────┐                               ┌─────────────────────────────────────────────────────────────┐ ┌─────────────────────────────────────────────────────────────┐ ┌─────────────────────────────────────────────────────────────┐ ┌─────────────────────────────────────────────────────────────┐                                                                                                                                                                                  ┌────────────────────────────────┐
                                                                                                                                          │                      │ │                      │ │                      │                                                                                                                         │onScenario(event: Event): void                 │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 │                                │                               │                                                             │ │                                                             │ │                                                             │ │                                                             │                                                                                                                                                                                  │                                │
                                                                                                                                          └──────────────────────┘ └──────────────────────┘ └──────────────────────┘                                                                                                                         │onSingleLineComment(event: Event): void        │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 │        BaseRegExpEvent         │                               │                       DocStringEvent                        │ │                  DocStringIndentStartEvent                  │ │                  DocStringIndentStopEvent                   │ │                       UnexpectedEvent                       │                                                                                                                                                                                  │      BaseVocabularyEvent       │
                                                                                                                                                                                                                                                                                                                                             │onStep(event: Event): void                     │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 │                                │                               │                                                             │ │                                                             │ │                                                             │ │                                                             │                                                                                                                                                                                  │                                │
                                                                                                                                                                                                                                                                                                                                             │onText(event: Event): void                     │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 ├────────────────────────────────┤                               ├─────────────────────────────────────────────────────────────┤ ├─────────────────────────────────────────────────────────────┤ ├─────────────────────────────────────────────────────────────┤ ├─────────────────────────────────────────────────────────────┤                                                                                                                                                                                  ├────────────────────────────────┤
                                                                                                                                                                                                                                                                                                                                             │onUnexpectedEvent(event: Event): void          │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 │regexp: RegExp                  │                               │handle(source: string, session: Session, state: State): void │ │handle(source: string, session: Session, state: State): void │ │handle(source: string, session: Session, state: State): void │ │handle(source: string, session: Session, state: State): void │                                                                                                                                                                                  │vocabulary: string              │
                                                                                                                                                                                                                                                                                                                                             └───────────────────────────────────────────────┘                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 └────────────────────────────────┘                               │                                                             │ │                                                             │ │                                                             │ │                                                             │                                                                                                                                                                                  └────────────────────────────────┘
                                                                                                                                                                                                                                                                                                                                                                     ▲                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ▲                                               └─────────────────────────────────────────────────────────────┘ └─────────────────────────────────────────────────────────────┘ └─────────────────────────────────────────────────────────────┘ └─────────────────────────────────────────────────────────────┘                                                                                                                                                                                                   ▲
                                                                                                                                                                                                                                                                                                                                                                     │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 │
                                                                                                                                                                                                                                                                                                                                                                     │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 │
                                                                                                                                                                                                                                                                                                                                                                     │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          │                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 │
                                                                                                                                                                             ┌─────────────────────────────────────────────┬─────────────────────────────────────────────┬─────────────────────────────────────────────┬─────────────────────────────────────────────┼─────────────────────────────────────────────┬─────────────────────────────────────────────┬────────────────────────────────────────────┬────────────────────────────────────────────┐                                                                            ┌───────────────────────────────────────────────────────────────────────────┬─────────────────────────────────────────────────────────────────────┬───────────────────────────────────────────────────────────────┬─────────────────────────────────────────────────────────────────────┼───────────────────────────────────────────────────────────────────────────┬───────────────────────────────────────────────────────────────────────────┬───────────────────────────────────────────────────────────────────────────┬───────────────────────────────────────────────────────────────────────────┐                                                                               ┌───────────────────────────────────────────────────────────────────────────┬─────────────────────────────────────┴─────────────────────────────────────┬───────────────────────────────────────────────────────────────────────────┐
                                                                                                                                                                             │                                             │                                             │                                             │                                             │                                             │                                             │                                            │                                            │                                                                            │                                                                           │                                                                     │                                                               │                                                                     │                                                                           │                                                                           │                                                                           │                                                                           │                                                                               │                                                                           │                                                                           │                                                                           │
                                                                                                                                                                             │                                             │                                             │                                             │                                             │                                             │                                             │                                            │                                            │                                                                            │                                                                           │                                                                     │                                                               │                                                                     │                                                                           │                                                                           │                                                                           │                                                                           │                                                                               │                                                                           │                                                                           │                                                                           │
                                                                                                                                                                             │                                             │                                             │                                             │                                             │                                             │                                             │                                            │                                            │                                                                            │                                                                           │                                                                     │                                                               │                                                                     │                                                                           │                                                                           │                                                                           │                                                                           │                                                                               │                                                                           │                                                                           │                                                                           │
                                                                                                                                                                             │                                             │                                             │                                             │                                             │                                             │                                             │                                            │                                            │                                                                            │                                                                           │                                                                     │                                                               │                                                                     │                                                                           │                                                                           │                                                                           │                                                                           │                                                                               │                                                                           │                                                                           │                                                                           │
                                                                                                                                                       ┌───────────────────────────────────────────┐ ┌───────────────────────────────────────────┐ ┌───────────────────────────────────────────┐ ┌───────────────────────────────────────────┐ ┌───────────────────────────────────────────┐ ┌───────────────────────────────────────────┐ ┌───────────────────────────────────────────┐ ┌─────────────────────────────────────────┐ ┌───────────────────────────────────────────┐                 ┌─────────────────────────────────────────────────────────────────────────┐ ┌─────────────────────────────────────────────────────────────────────────┐ ┌─────────────────────────────────────────────────────────────┐ ┌─────────────────────────────────────────────────────────────┐ ┌─────────────────────────────────────────────────────────────────────────┐ ┌─────────────────────────────────────────────────────────────────────────┐ ┌─────────────────────────────────────────────────────────────────────────┐ ┌─────────────────────────────────────────────────────────────────────────┐ ┌─────────────────────────────────────────────────────────────────────────┐     ┌─────────────────────────────────────────────────────────────────────────┐ ┌─────────────────────────────────────────────────────────────────────────┐ ┌─────────────────────────────────────────────────────────────────────────┐ ┌─────────────────────────────────────────────────────────────────────────┐
                                                                                                                                                       │                                           │ │                                           │ │                                           │ │                                           │ │                                           │ │                                           │ │                                           │ │                                         │ │                                           │                 │                                                                         │ │                                                                         │ │                                                             │ │                                                             │ │                                                                         │ │                                                                         │ │                                                                         │ │                                                                         │ │                                                                         │     │                                                                         │ │                                                                         │ │                                                                         │ │                                                                         │
                                                                                                                                                       │               InitialState                │ │       ConsumeMultiLineCommentState        │ │            CreateFeatureState             │ │           CreateBackgroundState           │ │    CreateBackgroundStepDocStringState     │ │            CreateScenarioState            │ │     CreateScenarioStepDocStringState      │ │              BaseStepState              │ │                FinalState                 │                 │                             AnnotationEvent                             │ │                             BlankLineEvent                              │ │                  DocStringTokenStartEvent                   │ │                   DocStringTokenStopEvent                   │ │                                EndEvent                                 │ │                              LanguageEvent                              │ │                          MultiLineCommentEvent                          │ │                         SingleLineCommentEvent                          │ │                                TextEvent                                │     │                             BackgroundEvent                             │ │                              FeatureEvent                               │ │                              ScenarioEvent                              │ │                                StepEvent                                │
                                                                                                                                                       │                                           │ │                                           │ │                                           │ │                                           │ │                                           │ │                                           │ │                                           │ │                                         │ │                                           │                 │                                                                         │ │                                                                         │ │                                                             │ │                                                             │ │                                                                         │ │                                                                         │ │                                                                         │ │                                                                         │ │                                                                         │     │                                                                         │ │                                                                         │ │                                                                         │ │                                                                         │
                                                                                                                                                       ├───────────────────────────────────────────┤ ├───────────────────────────────────────────┤ ├───────────────────────────────────────────┤ ├───────────────────────────────────────────┤ ├───────────────────────────────────────────┤ ├───────────────────────────────────────────┤ ├───────────────────────────────────────────┤ ├─────────────────────────────────────────┤ └───────────────────────────────────────────┘                 ├─────────────────────────────────────────────────────────────────────────┤ ├─────────────────────────────────────────────────────────────────────────┤ ├─────────────────────────────────────────────────────────────┤ ├─────────────────────────────────────────────────────────────┤ ├─────────────────────────────────────────────────────────────────────────┤ ├─────────────────────────────────────────────────────────────────────────┤ ├─────────────────────────────────────────────────────────────────────────┤ ├─────────────────────────────────────────────────────────────────────────┤ ├─────────────────────────────────────────────────────────────────────────┤     ├─────────────────────────────────────────────────────────────────────────┤ ├─────────────────────────────────────────────────────────────────────────┤ ├─────────────────────────────────────────────────────────────────────────┤ ├─────────────────────────────────────────────────────────────────────────┤
                                                                                                                                                       │onAnnotation(event: Event)                 │ │onMultiLineComment(event: Event): void     │ │onAnnotation(event: Event)                 │ │onAnnotation(event: Event)                 │ │onDocString(event: Event)                  │ │onAnnotation(event: Event)                 │ │onDocString(event: Event)                  │ │specification: Specification             │                                                               │notify(source: string, session: Session, state: State, match: any): void │ │notify(source: string, session: Session, state: State, match: any): void │ │handle(source: string, session: Session, state: State): void │ │handle(source: string, session: Session, state: State): void │ │notify(source: string, session: Session, state: State, match: any): void │ │notify(source: string, session: Session, state: State, match: any): void │ │notify(source: string, session: Session, state: State, match: any): void │ │notify(source: string, session: Session, state: State, match: any): void │ │notify(source: string, session: Session, state: State, match: any): void │     │notify(source: string, session: Session, state: State, match: any): void │ │notify(source: string, session: Session, state: State, match: any): void │ │notify(source: string, session: Session, state: State, match: any): void │ │notify(source: string, session: Session, state: State, match: any): void │
                                                                                                                                                       │onFeature(event: Event)                    │ │onText(event: Event): void                 │ │onBackground(event: Event)                 │ │onMultiLineComment(event: Event)           │ │onDocStringIndentStop(event: Event)        │ │onMultiLineComment(event: Event)           │ │onDocStringIndentStop(event: Event)        │ │annotations: any[]                       │                                                               │                                                                         │ │                                                                         │ │                                                             │ │                                                             │ │                                                                         │ │                                                                         │ │                                                                         │ │                                                                         │ │                                                                         │     │                                                                         │ │                                                                         │ │                                                                         │ │                                                                         │
                                                                                                                                                       │onLanguage(event: Event)                   │ │                                           │ │onMultiLineComment(event: Event)           │ │onStep(event: Event)                       │ │onDocStringTokenStop(event: Event)         │ │onStep(event: Event)                       │ │onDocStringTokenStop(event: Event)         │ ├─────────────────────────────────────────┤                                                               └─────────────────────────────────────────────────────────────────────────┘ └─────────────────────────────────────────────────────────────────────────┘ └─────────────────────────────────────────────────────────────┘ └─────────────────────────────────────────────────────────────┘ └─────────────────────────────────────────────────────────────────────────┘ └─────────────────────────────────────────────────────────────────────────┘ └─────────────────────────────────────────────────────────────────────────┘ └─────────────────────────────────────────────────────────────────────────┘ └─────────────────────────────────────────────────────────────────────────┘     └─────────────────────────────────────────────────────────────────────────┘ └─────────────────────────────────────────────────────────────────────────┘ └─────────────────────────────────────────────────────────────────────────┘ └─────────────────────────────────────────────────────────────────────────┘
                                                                                                                                                       │onMultiLineComment(event: Event)           │ └───────────────────────────────────────────┘ │onScenario(event: Event)                   │ └───────────────────────────────────────────┘ └───────────────────────────────────────────┘ └───────────────────────────────────────────┘ └───────────────────────────────────────────┘ │onAnnotation(event: Event): void         │
                                                                                                                                                       └───────────────────────────────────────────┘                                               │onText(event: Event)                       │                                                                                                                                                                                         │onMultilineComment(event: Event): void   │
                                                                                                                                                                                                                                                   └───────────────────────────────────────────┘                                                                                                                                                                                         │onScenario(event: Event): void           │
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         └─────────────────────────────────────────┘
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ▲
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              │
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              │
                                                                                                                                                                                                                                                                                                                                                                                                                                           ┌─────────────────────────────────────────┬────────────────────────┴────────────────────┬─────────────────────────────────────────────┐
                                                                                                                                                                                                                                                                                                                                                                                                                                           │                                         │                                             │                                             │
                                                                                                                                                                                                                                                                                                                                                                                                                                           │                                         │                                             │                                             │
                                                                                                                                                                                                                                                                                                                                                                                                                                           │                                         │                                             │                                             │
                                                                                                                                                                                                                                                                                                                                                                                                                         ┌───────────────────────────────────┐ ┌───────────────────────────────────────────┐ ┌───────────────────────────────────────────┐ ┌───────────────────────────────────────────┐
                                                                                                                                                                                                                                                                                                                                                                                                                         │                                   │ │                                           │ │                                           │ │                                           │
                                                                                                                                                                                                                                                                                                                                                                                                                         │ AfterBackgroundStepDocStringState │ │         AfterBackgroundStepState          │ │      AfterScenarioStepDocStringState      │ │          AfterScenarioStepState           │
                                                                                                                                                                                                                                                                                                                                                                                                                         │                                   │ │                                           │ │                                           │ │                                           │
                                                                                                                                                                                                                                                                                                                                                                                                                         ├───────────────────────────────────┤ ├───────────────────────────────────────────┤ ├───────────────────────────────────────────┤ ├───────────────────────────────────────────┤
                                                                                                                                                                                                                                                                                                                                                                                                                         │onStep(event: Event): void         │ │onDocStringIndentStart(event: Event): void │ │onEnd(event: Event): void                  │ │onDocStringIndentStart(event: Event): void │
                                                                                                                                                                                                                                                                                                                                                                                                                         └───────────────────────────────────┘ │onDocStringTokenStart(event: Event): void  │ │onStep(event: Event): void                 │ │onDocStringTokenStart(event: Event): void  │
                                                                                                                                                                                                                                                                                                                                                                                                                                                               │onStep(event: Event): void                 │ │                                           │ │onEnd(event: Event): void                  │
                                                                                                                                                                                                                                                                                                                                                                                                                                                               └───────────────────────────────────────────┘ └───────────────────────────────────────────┘ └───────────────────────────────────────────┘









                                                                                                                                                                                                                                                                                                                  ┌──────────────────────────────────────────────────────────────────┐                           ┌─────────────────────────────────────────────────────────────────────────────────────────────┐                       ┌──────────────────────────────────────┐
                                                                                                                                                                                                                                        ┌───────────────────────────────────────────────┐                         │                                                                  │                           │                                                                                             │                       │                                      │
                                                                                                                                                                                                                                        │                                               │                         │                             Library                              │                           │                                         Dictionary                                          │                       │                 Term                 │
                                                                                                                                                                                                                                        │                   Libraries                   │                         │                                                                  │                           │                                                                                             │                       │                                      │
                                                                                                                                                                                                                                        │                                               │                         ├──────────────────────────────────────────────────────────────────┤                           ├─────────────────────────────────────────────────────────────────────────────────────────────┤                       ├──────────────────────────────────────┤
                                                                                                                                                                                                                                        ├───────────────────────────────────────────────┤                        ╱│name: string                                                      │                          ╱│prefix: string                                                                               │                      ╱│expression: string                    │
                                                                                                                                                                                                                                        │libraries: Library[]                           │───────aggregates────────│dictionaries: Dictionary[]                                        │───────references──────────│delimiter: string                                                                            │─────────defines───────│definition: RegExp | string           │
                                                                                                                                                                                                                                        ├───────────────────────────────────────────────┤                        ╲├──────────────────────────────────────────────────────────────────┤                          ╲├─────────────────────────────────────────────────────────────────────────────────────────────┤                      ╲│converters: Converter[]               │
                                                                                                                                                                                                                                        │select(names: string[]): Libraries             │                         │getCompatibleMacros(step: Step): Macro[]                          │                           │combine(dictionaries: Dictionary[]): Dictionary                                              │                       ├──────────────────────────────────────┤
                                                                                                                                                                                                                                        │add(library: Library): Libraries               │                         │define(signatures: string[], fn: function, options: any): Library │                           │copyInto(other: Dictionary): Dictionary                                                      │                       │definition: string                    │
                                                                                                                                                                                                                                        │getCompatibleMacros(step: Step): Macro[]       │                         └──────────────────────────────────────────────────────────────────┘                           │define(expression: string, definition: string | RegExp, converters: Converter[]): Dictionary │                       │converters: Converter[]               │
                                                                                                                                                                                                                                        └───────────────────────────────────────────────┘                                                           │                                                            │defines(expression: string): boolean                                                         │                       │resolves(expression: string): boolean │
                                                                                                                                                                                                                                                                                                                                                    │                                                            │expand(template: string): { regexp: RegExp, converters: Converter[] }                        │                       │defineIn(dictionary: Dictionary)      │
                                                                                                                                                                                                                                                                                                                                                    │                                                            └─────────────────────────────────────────────────────────────────────────────────────────────┘                       └──────────────────────────────────────┘
                                                                                                                                                                                                                                                                                                                                                 defines
                                                                                                                                                                                                                                                                                                                                                    │
                                                                                                                                                                                                                                                      ┌─────────────────────────────────────────────┐                                               │
                                                                                                                                                                                                                                                      │                                             │                                               │
                                                                                                                                                                                                                                                      │                   Section                   │                                               │
                                                                                                                                                                                                                                                      │                                             │                                               │
                                                                                                                                                                                                                                                      ├─────────────────────────────────────────────┤                                               │
                                                                                                                                                                                                                                                      │annotations: Annotations                     │                                               │
                                                                                                                                                                                                                                                      │title: string                                │                                               │
                                                                                                                                                                                                                                                      │iterables: Scenario[] | Step[]               │                                               │
                                                                                                                                                                                                                                                      ├─────────────────────────────────────────────┤                                               │
                                                                                                                                                                                                                                                      │title: string                                │                                               │
                                                                                                                                                                                                                                                      │hasAnnotation(name: string): boolean         │                                               │
                                                                                                                                                                                                                                                      │getAnnotation(name: string): Annotation      │                                               │
                                                                                                                                                                           ┌────────────────────────────────┐                                         │isPending(): boolean                         │                                               │
                                                                                                                                                                           │run(state: State): Promise<any> │                                         │isExclusive(): boolean                       │                                               │
                                                                                                                                                                           │abort(): AmbiguousStep          │                                         │forEach(iterator: function): void            │                                               │
                                                                                                                                                                           └────────────────────────────────┘                                         │reduce(iterator: function, accumulator): any │                                               │
                                                                                                                                                                                                                                                      └─────────────────────────────────────────────┘                                               │
                                                                                                                                                                                                                                                                             ▲                                                                      │
                                                                                                                                                                                                                                                                             │                                                                      │
                                                                                                                                                                                                                                                                             │                                                                      │
                                                                                                                                                                                                                                                                             │                                                                      │
                                                                                                                                                                                                                                                     ┌───────────────────────┴──────────────────────┐                                               │
                                                                                                                                                                                                                                                     │                                              │                                               │
                                                                                                                                                                                                                                                     │                                              │                                               │
                                                                                                                                                                                                                                                     │                                              │                                               │
                                                                                                                                                                                                                                                     │                                              │                                              ╱│╲
                                                                                                                                                                                                                                                     │                                              │                              ┌────────────────────────────────┐
                                                                                                                                                                             ┌─────────────────────────────────────────────┐            ┌──────────────────────────┐                  ┌──────────────────────────┐                 │                                │
                                                                                                                                                                             │                                             │            │                          │                 ╱│                          │                ╱│              Step              │
                                                                                                                                                                             │                   Script                    │            │         Feature          │─────groups───────│         Scenario         │──────groups─────│          <interface>           │
                                                                                                                                                                             │                                             │            │                          │                 ╲│                          │                ╲│                                │
                                                                                                                                                                             ├─────────────────────────────────────────────┤            ├──────────────────────────┤                  ├──────────────────────────┤                 ├────────────────────────────────┤
                                                                                                                                                                             │specifications: any[]                        │            │annotations: Annotations  │                  │isAborted(): true         │                 │run(state: State): Promise<any> │
                                                                                                                                                                             ├─────────────────────────────────────────────┤            │title: string             │                  │abort(): void             │                 └────────────────────────────────┘
                                                                                                                                                                             │compile({ libraries: Library[] }): Feature[] │            │steps: Step[]             │                  └──────────────────────────┘                                  ▲
                                                                                                                                                                             │                                             │            ├──────────────────────────┤                                                                                │
                                                                                                                                                                             └─────────────────────────────────────────────┘            │isAborted(): true         │                                                                                │
                                                                                                                                                                                                                                        │abort(): void             │                                                                                │
                                                                                                                                                                                                                                        └──────────────────────────┘                                                                                │
                                                                                                                                                                                                                                                                                                                                      ┌───────────────────────────┐
                                                                                                                                                                                                                                                                                                                                      │         BaseStep          │                                                                                      ┌────────────────────────────────┐
                                                                                                                                                                                                                                                                                                                                      │          <Step>           │                        ┌─────────────────────────────────────┐                       │                                │
                                                                                                                                                                                                                                                                                                                                      │                           │                        │                                     │                       │           Annotation           │                                                                                                                        ┌────────────────────────────────┐
                                                                                                                                                                                                                                                                                                                                      ├───────────────────────────┤                        │             Annotations             │                       │                                │                                                                                                                        │                                │
                                                                                                                                                                                                                                                                                                                                      │annotations: Annotations   │                        │                                     │                       ├────────────────────────────────┤                                                                                                                        │             RegExp             │                               ┌───────────────────────────────────────────────────┐
                                                                                                                                                                                                                                                                                                                                      │text: string               │                        ├─────────────────────────────────────┤                      ╱│name: string                    │                                                                                                                        │                                │                               │                                                   │
                                                                                                                                                                                                                                                                                                                                      │generalised: string        │──────is refined by─────│annotations: Annotation[]            │──────aggregates───────│value: any                      │                                                                                                                        └────────────────────────────────┘                               │                     Converter                     │
                                                                                                                                                                                                                                                                                                                                      │docString?: string         │                        ├─────────────────────────────────────┤                      ╲├────────────────────────────────┤                                                               ┌──────────────────────────────────────────┐                              ▲                                               │                    <interface>                    │
                                                                                                                                                                                                                                                                                                                                      ├───────────────────────────┤                        │has(name: string): boolean           │                       │value: any                      │                                                               │                                          │                              │                                               │                                                   │
                                                                                                                                                                                                                                                                                                                                      │hasAnnotation(): boolean   │                        │get(name: string): Annotation        │                       │booleanValue: boolean           │                                                               │                Signature                 │                              │                                               ├───────────────────────────────────────────────────┤
                                                                                                                                                                                                                                                                                                                                      │getAnnotation(): Annotation│                        │add(name: string, value): Annotations│                       │numberValue: number             │                                                               │                                          │                              │                                               │convert(state: State, values: string[]):           │
                                                                                                                                                                                                                                                                                                                                      │isPending(): boolean       │                        └─────────────────────────────────────┘                       │dateValue: date                 │                                                               ├──────────────────────────────────────────┤             ┌────────────────────────────────┐                               └───────────────────────────────────────────────────┘
                                                                                                                                                                                                                                                                                                                                      │isExclusive(): boolean     │                                                                                      │stringValue: string             │                                                               │library: Library                          │             │                                │                                                         △
                                                                                                                                                                                                                                                                                                                                      │isAborted(): boolean       │                                                                                      │values: any[]                   │                                           ┌───────────────────│template?: string                         │───matches───│            Pattern             │                                                         │
                                                                                                                                                                                                                                                                                                                                      │abort(): Step              │                                                                                      │answersTo(name: string): boolean│                                           │                   │pattern: Pattern                          │             │                                │                                                         │
                                                                                                                                                                                                                                                                                                                                      └───────────────────────────┘                                                                                      │set(value: any): void           │                                           │                   ├──────────────────────────────────────────┤             ├────────────────────────────────┤                                                         │
                                                                                                                                                                                                                                                                                                                                                    ▲                                                                                                    │add(value: any): void           │                                           │                   │supports(step: BaseStep): boolean         │             │supports(text: string): boolean │                                             ┌───────────────────────┐
                                                                                                                                                                                                                                                                                                                                                    │                                                                                                    └────────────────────────────────┘                                           │                   │setCurrentLibrary(state): void            │             │equals(other: Pattern): boolean │                                             │                       │
                                                                                                                                                                                                                                                                                                                                                    │                                                                                                                                                                                 │                   │isFromLibrary(name): boolean              │             │countMatchingGroups(): number   │                                             │     BaseConverter     │
                                                                                                                                                                                                                                                                                                                                                    │                                                                                                                                                                                 │                   │reportDuplicate(other: Signature): void   │             └────────────────────────────────┘                                             │                       │
                                                                                                                                                                                                                                                                                            ┌───────────────────────────────────┬───────────────────┴──────────────────┬──────────────────────────────────┐                                                                                                                           │                   │parseArguments(step: BaseStep): string[]  │                                                                                            ├───────────────────────┤
                                                                                                                                                                                                                                                                                            │                                   │                                      │                                  │                                                                                                                           │                   └──────────────────────────────────────────┘                                                                                            │demand: number         │
                                                                                                                                                                                                                                                                                            │                                   │                                      │                                  │                                                                                                                           │                                                                                                                                                           └───────────────────────┘
                                                                                                                                                                                                                                                                                            │                                   │                                      │                                  │                                                                                                                           │                                                                                                                                                                       ▲
                                                                                                                                                                                                                                                                                            │                                   │                                      │                                  │                                                                                                                           │                                                                                                                                                                       │
                                                                                                                                                                                                                                                                                            │                                   │                                      │                                  │                                                                                                                           │                                                                                                                                                                       │
                                                                                                                                                                                                                                                                           ┌────────────────────────────────┐  ┌────────────────────────────────┐     ┌────────────────────────────────┐  ┌───────────────────────────────┐                                                                                                   is identified by                                                                                                                                                                │
                                                                                                                                                                                                                                                                           │                                │  │                                │     │                                │  │                               │                                                                                                           │                                                                                 ┌─────────────────────────────────────────────────────────┬───────────────────────────┴───────────────────────────┬───────────────────────────────────────────────────────┐
                                                                                                                                                                                                                                                                           │         AmbiguousStep          │  │         UndefinedStep          │     │          DynamicStep           │  │         RunnableStep          │                                                                                                           │                                                                                 │                                                         │                                                       │                                                       │
                                                                                                                                                                                                                                                                           │                                │  │                                │     │                                │  │                               │                               ┌───────────────────────────────────────────────────────┐                   │                                                                                 │                                                         │                                                       │                                                       │
                                                                                                                                                                                                                                                                           ├────────────────────────────────┤  ├────────────────────────────────┤     ├────────────────────────────────┤  ├───────────────────────────────┤                               │                                                       │                   │                                                                                 │                                                         │                                                       │                                                       │
                                                                                                                                                                                                                                                                           │contenders: Macro[]             │  │run(state: State): Promise<any> │     │libraries: Libraries            │  │macro: Macro                   │────runs───────────────────────│                         Macro                         │───────────────────┘                                                                                 │                                                         │                                                       │                                                       │
                                                                                                                                                                                                                                                                           ├────────────────────────────────┤  │suggest(): string               │     │annotations: Annotations        │  ├───────────────────────────────┤                               │                                                       │                                                                                                     │                                                         │                                                       │                                                       │
                                                                                                                                                                                                                                                                           │run(state: State): Promise<any> │  │abort(): UndefinedStep          │     │text: string                    │  │run(state: State): Promise<any>│                               ├───────────────────────────────────────────────────────┤                                                                        ┌────────────────────────────────────────────────────────┐ ┌──────────────────────────────────────────────────────┐ ┌─────────────────────────────────────────────────────┐ ┌─────────────────────────────────────────────────────┐
                                                                                                                                                                                                                                                                           │abort(): AmbiguousStep          │  └────────────────────────────────┘     │generalised: string             │  └───────────────────────────────┘                               │signature: Signature                                   │                                                                        │                                                        │ │                                                      │ │                                                     │ │                                                     │
                                                                                                                                                                                                                                                                           └────────────────────────────────┘                                         │docString?: string              │                                                                  │converters: MultiConverter                             │─────────────────────utilises───────────────────────────────────────────│                     MultiConverter                     │ │                   BooleanConverter                   │ │                   NumberConverter                   │ │                    ListConverter                    │
                                                                                                                                                                                                                                                                                                                                                      ├────────────────────────────────┤                                                                  │fn: StepFunction                                       │                                                                        │                                                        │ │                                                      │ │                                                     │ │                                                     │
                                                                                                                                                                                                                                                                                                                                                      │run(state: State): Promise<any> │                                                                  ├───────────────────────────────────────────────────────┤────────────────────────has──────────────────┐                          ├────────────────────────────────────────────────────────┤ ├──────────────────────────────────────────────────────┤ ├─────────────────────────────────────────────────────┤ ├─────────────────────────────────────────────────────┤
                                                                                                                                                                                                                                                                                                                                                      └────────────────────────────────┘                                                                  │supports(step: Step): boolean                          │                                             │                          │converters: Converter[]                                 │ │convert(state: State, value: string): Promise<boolean>│ │convert(state: State, value: string): Promise<number>│ │regexp: RegExp                                       │
                                                                                                                                                                                                                                                                                                                                                                       │                                                                                  │isPending(): boolean                                   │                                             │                          ├────────────────────────────────────────────────────────┤ └──────────────────────────────────────────────────────┘ └─────────────────────────────────────────────────────┘ │converter: Converter                                 │
                                                                                                                                                                                                                                                                                                                                                                       │                                                                                  │setCurrentLibrary(state: any): void                    │                                             │                          │convert(state: State, values: string[]): Promise<any[]> │                                                                                                                  ├─────────────────────────────────────────────────────┤
                                                                                                                                                                                                                                                                                                                                                                     holds                                                                                │isFromLibrary(name: string): boolean                   │                                             │                          └────────────────────────────────────────────────────────┘                                                                                                                  │convert(state: State, value: string): Promise<any[]> │
                                                                                                                                                                                                                                                                                                                                                                       │                                                                                  │reportDuplicate(other: Signature): void                │                                             │                                                                                                                                                                                                      └─────────────────────────────────────────────────────┘
                                                                                                                                                                                                                                                                                                                                                                       │                                                                                  │run(state: State, step: Step): Promise<any>            │                                             │
                                                                                                                                                                                                                                                                                                                                                                       │                                                                                  └───────────────────────────────────────────────────────┘                                             │
                                                                                                                                                                                                                                                           ┌────────────────────────────────────────────────────┐            ┌──────────────────────────────────────────────────────────────────────────────────┐                                                                     │                                                                         │
                                                                                                                                                                                                                                                           │                                                    │            │                                                                                  │                                                                     │                                                                         │
                                                                                                                                                                                                                                                           │                       State                        │            │                                   Competition                                    │                                                                     │                                                                         │
                                                                                                                                                                                                                                                           │                                                    │            │                                                                                  │                                                                     │                                                                         │
                                                                                                                                                                                                                                                           ├────────────────────────────────────────────────────┤            ├──────────────────────────────────────────────────────────────────────────────────┤                                                                     │                                                                         │
                                                                                                                                                                                                                                                           │feature: Feature                                    │            │rank(state: State, candidates: Macro[]): { winner?: Macro, contenders?: Macro[] } │                                                                   runs                                           ┌────────────────────────────────────────────────────────┐ ┌────────────────────────────────────────────────────────┐
                                                                                                                                                                                                                                                           │scenario: Scenario                                  │            └──────────────────────────────────────────────────────────────────────────────────┘                                                                     │                                            │                                                        │ │                                                        │
                                                                                                                                                                                                                                                           │state:  any                                         │                                                                                                                                                                     │                                            │                       FixedArity                       │ │                     VariableArity                      │
                                                                                                                                                                                                                                                           │get(name: string, scope: Scope): any                │                                                                                                                                                                     │                                            │                                                        │ │                                                        │
                                                                                                                                                                                                                                                           │set(name: string, value: any, scope: Scope): void   │                                                                                                                                                                     │                                            ├────────────────────────────────────────────────────────┤ ├────────────────────────────────────────────────────────┤
                                                                                                                                                                                                                                                           │remove(name: string, scope: Scope): void            │                                                                                                                                                                     │                                            │validate(step: BaseStep, supply: number, demand: number)│ │validate(step: BaseStep, supply: number, demand: number)│
                                                                                                                                                                                                                                                           │clear(scopes: Scope[]): void                        │                                                                                                                                                                     │                                            └────────────────────────────────────────────────────────┘ └────────────────────────────────────────────────────────┘
                                                                                                                                                                                                                                                           └────────────────────────────────────────────────────┘                                                                                                                                                                     │
                                                                                                                                                                                                                                                                                                                                                                                                                                                               ┌────────────────────────────────────────────┐
                                                                                                                                                                                                                                                                                                                                                                                                                                                               │                                            │
                                                                                                                                                                                                                                                                                                                                                                                                                                                               │                StepFunction                │
                                                                                                                                                                                                                                                                                                                                                                                                                                                               │                <interface>                 │
                                                                                                                                                                                                                                                                                                                                                                                                                                                               │                                            │
                                                                                                                                                                                                                                                                                                                                                                                                                                                               ├────────────────────────────────────────────┤
                                                                                                                                                                                                                                                                                                                                                                                                                                                               │run(state: State, args: any[]): Promise<any>│
                                                                                                                                                                                                                                                                                                                                                                                                                                                               └────────────────────────────────────────────┘
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      △
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      │
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      │
                                                                                                                                                                                                                                                                                                                                                                                                                                      ┌───────────────────────────────────────────────┼──────────────────────────────────────────────┐
                                                                                                                                                                                                                                                                                                                                                                                                                                      │                                               │                                              │
                                                                                                                                                                                                                                                                                                                                                                                                                                      │                                               │                                              │
                                                                                                                                                                                                                                                                                                                                                                                                                                      │                                               │                                              │
                                                                                                                                                                                                                                                                                                                                                                                                                                      │                                               │                                              │
                                                                                                                                                                                                                                                                                                                                                                                                              ┌──────────────────────────────────────────────┐ ┌─────────────────────────────────────────────┐ ┌───────────────────────────────────────────┐
                                                                                                                                                                                                                                                                                                                                                                                                              │                                              │ │                                             │ │                                           │
                                                                                                                                                                                                                                                                                                                                                                                                              │                AsyncFunction                 │ │              CallbackFunction               │ │              PendingFunction              │
                                                                                                                                                                                                                                                                                                                                                                                                              │                                              │ │                                             │ │                                           │
                                                                                                                                                                                                                                                                                                                                                                                                              ├──────────────────────────────────────────────┤ ├─────────────────────────────────────────────┤ ├───────────────────────────────────────────┤
                                                                                                                                                                                                                                                                                                                                                                                                              │fn: function                                  │ │fn: function                                 │ │isPending(): boolean                       │
                                                                                                                                                                                                                                                                                                                                                                                                              ├──────────────────────────────────────────────┤ ├─────────────────────────────────────────────┤ ├───────────────────────────────────────────┤
                                                                                                                                                                                                                                                                                                                                                                                                              │demand: number                                │ │demand: number                               │ │run(): Promise<any>                        │
                                                                                                                                                                                                                                                                                                                                                                                                              │isPending(): boolean                          │ │isPending(): boolean                         │ └───────────────────────────────────────────┘
                                                                                                                                                                                                                                                                                                                                                                                                              │run(state: State, args: any[]): Promise<any>  │ │run(state: State, args: any[]): Promise<any> │
                                                                                                                                                                                                                                                                                                                                                                                                              └──────────────────────────────────────────────┘ │                                             │
                                                                                                                                                                                                                                                                                                                                                                                                                                                               └─────────────────────────────────────────────┘
</pre>
